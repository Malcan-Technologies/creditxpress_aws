# Backend Environment Variables
# Copy this file to .env and fill in the values

# ======================
# Database
# ======================
DATABASE_URL=postgresql://postgres:password@localhost:5432/creditxpress

# ======================
# Authentication
# ======================
JWT_SECRET=your-jwt-secret-here-min-32-chars
JWT_REFRESH_SECRET=your-refresh-secret-here-min-32-chars

# ======================
# Server
# ======================
PORT=4001
NODE_ENV=development
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:3002

# ======================
# URLs
# ======================
BASE_URL=http://localhost:4001
FRONTEND_URL=http://localhost:3000
ADMIN_BASE_URL=http://localhost:3002

# ======================
# AWS S3 Storage
# ======================
AWS_REGION=ap-southeast-5
S3_BUCKET=creditxpress-prod-files
S3_UPLOAD_PREFIX=uploads
# AWS credentials (use IAM role in production, or set these for local dev)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# ======================
# Signing Orchestrator (On-Prem)
# ======================
SIGNING_ORCHESTRATOR_URL=http://localhost:4010
SIGNING_ORCHESTRATOR_API_KEY=your-signing-api-key

# ======================
# DocuSeal
# ======================
DOCUSEAL_BASE_URL=http://localhost:3001
DOCUSEAL_API_URL=http://host.docker.internal:3001
DOCUSEAL_API_TOKEN=your-docuseal-token
DOCUSEAL_LOAN_AGREEMENT_TEMPLATE_ID=1
DOCUSEAL_WEBHOOK_SECRET=

# ======================
# Company Signing (DocuSeal)
# ======================
COMPANY_SIGNING_EMAIL=admin@creditxpress.com.my
WITNESS_NAME=Legal Representative
WITNESS_EMAIL=legal@creditxpress.com.my

# ======================
# WhatsApp API
# ======================
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_USE_OTP_TEMPLATE=true

# ======================
# Email (Resend)
# ======================
RESEND_API_KEY=re_xxxxxxxxxxxx
RESEND_FROM_EMAIL=noreply@creditxpress.com.my

# ======================
# CTOS eKYC
# ======================
CTOS_API_KEY=
CTOS_PACKAGE_NAME=
CTOS_SECURITY_KEY=
CTOS_BASE_URL=https://uat-eonboarding.ctos.com.my
CTOS_WEBHOOK_URL=https://your-domain.com/api/ctos/webhook
CTOS_CIPHERTEXT=MTIzNDU2Nzg5MDEy
CTOS_CIPHER=aes-256-cbc

# ======================
# CTOS B2B (Credit Reports)
# For local dev, set individual vars. In AWS, use CTOS_B2B_CREDENTIALS JSON secret.
# ======================
CTOS_B2B_COMPANY_CODE=
CTOS_B2B_ACCOUNT_NO=
CTOS_B2B_USER_ID=
CTOS_B2B_CLIENT_ID=
CTOS_B2B_SSO_PASSWORD=
CTOS_B2B_SSO_URL=https://uat-sso.ctos.com.my
CTOS_B2B_API_URL=https://uat-integration.ctos.com.my
CTOS_B2B_PRIVATE_KEY=
CTOS_B2B_MOCK_MODE=false

# ======================
# KYC Service (Docker microservices)
# ======================
KYC_DOCKER=true
KYC_JWT_SECRET=your-kyc-jwt-secret
KYC_TOKEN_TTL_MINUTES=15
KYC_DISABLE_LIVENESS=false
KYC_OCR_URL=http://ocr:7001/ocr
KYC_FACE_URL=http://face:7002/face-match
KYC_LIVENESS_URL=http://liveness:7003/liveness

# ======================
# Timezone
# ======================
TZ=Asia/Kuala_Lumpur

# ======================
# Server Identity (for digital signatures)
# ======================
# Public IP address shown in digitally signed documents
SERVER_PUBLIC_IP=210.186.80.101
# Fallback company name (used if database has no CompanySettings)
DEFAULT_COMPANY_NAME=Credit Xpress Sdn Bhd
# Fallback company address
DEFAULT_COMPANY_ADDRESS=Kuala Lumpur, Malaysia
